<?xml version="1.0" encoding="utf-8"?>
<Application>
	<Name>DTK Quellmosaike</Name>
	<Command>CM+SP+AR+CV+CV+ClipFootprints+BB</Command>	       
	<Workspace>
		<WorkspacePath>$workspace$</WorkspacePath>
		<Geodatabase>dtk$massstab$_$land$_$datum$</Geodatabase>
		<MosaicDataset>
			<MosaicDatasetType>source</MosaicDatasetType>
			<Name>S_$layer$</Name>
			<SRS>$srs$</SRS>
			<num_bands>4</num_bands>
			<pixel_type>$pixeltype$</pixel_type>
			<DefaultProperties>
				<allowed_compressions>None</allowed_compressions>
				<resampling_type>BILINEAR</resampling_type>
				<clip_to_footprints>CLIP</clip_to_footprints>
				<clip_to_boundary>CLIP</clip_to_boundary>
				<footprints_may_contain_nodata>FOOTPRINTS_DO_NOT_CONTAIN_NODATA</footprints_may_contain_nodata>
				<allowed_mosaic_methods>NorthWest;Seamline;None</allowed_mosaic_methods>
				<default_mosaic_method>NorthWest</default_mosaic_method>
				<cell_size>$cellSize$</cell_size>
				<metadata_level>BASIC</metadata_level>
				<data_source_type>PROCESSED</data_source_type>
				<max_num_of_download_items>200</max_num_of_download_items>
				<minimum_pixel_contribution>50</minimum_pixel_contribution>
			</DefaultProperties>
			<AddRasters>
				<AddRaster>
					<build_pyramids>NO_PYRAMIDS</build_pyramids>
					<dataset_id>DTK_$land$_$datum$</dataset_id>
					<raster_type>Raster Dataset</raster_type>
					<Sources>
						<data_path>$dataPath$</data_path>
					</Sources>
					<filter>*.tif</filter>
					<sub_folder>SUBFOLDERS</sub_folder>
					<duplicate_items_action>OVERWRITE_DUPLICATES</duplicate_items_action>
					<calculate_statistics>NO_STATISTICS</calculate_statistics>
				</AddRaster>
			</AddRasters>	
			<Processes>
				<CalculateValues>
				
					<CalculateValue>
						<fieldName>GroupName</fieldName>
						<expression>"dop_"+!Name![10:23]</expression>
						<expression_type>PYTHON3</expression_type>
					<!--<code_block>import re 		
 def splitLayerName(value):
	mo = re.search('[dop_]^dop20rgbi_\d{2}^_\d{3}[_]\d{4}[_]\d{1})      
	try:
		return mo.group()
	except AttributeError:
		return None
		dop20rgbi_32_564_5609_1_th_2020.tif
						</code_block>-->
					</CalculateValue>

					<CalculateValue>
						<fieldName>ZOrder</fieldName>
						<expression>-1</expression>
						<expression_type>PYTHON</expression_type>
					</CalculateValue>
				</CalculateValues>

				<ClipFootprints>
					<in_feature_class>\\lswfsdtk1\dtk2\DTK-N-Repository\Ressourcen\dtk25_Bestand.gdb\dtk25_laenderpolygone</in_feature_class>
					<where_clause>Land LIKE '$land$'</where_clause>
					<out_feature_class>$workspace$\dtk$massstab$_$land$_$datum$.gdb\source_footprints</out_feature_class>  
				</ClipFootprints>
				<BuildBoundary>
					<append_to_existing>OVERWRITE</append_to_existing>
				</BuildBoundary>
			</Processes>
		</MosaicDataset>
	</Workspace>
</Application>